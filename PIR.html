<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/assets/styles/styles.css">
<link rel="stylesheet" href="https://indestructibletype.com/fonts/Jost.css" type="text/css" charset="utf-8" />
<script src="https://kit.fontawesome.com/79c31398dc.js" crossorigin="anonymous"></script>

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/EasySensorsLogo-150x150.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/EasySensorsLogo-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/EasySensorsLogo-16x16.png">
<link rel="manifest" href="/assets/img/site.webmanifest">
<link rel="mask-icon" href="/assets/img/EasySensorsLogo.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/img/EasySensorsLogo-32x32.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- feed -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="easySensors blog" />




<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Wireless Arduino compatible PIR with LoRa or RFM 69 radio on board. | easySensors blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Wireless Arduino compatible PIR with LoRa or RFM 69 radio on board." />
<meta name="author" content="easySensors team" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Comes with nice enclosure, light and Temp Humidity sensors." />
<meta property="og:description" content="Comes with nice enclosure, light and Temp Humidity sensors." />
<link rel="canonical" href="http://localhost:4000/PIR.html" />
<meta property="og:url" content="http://localhost:4000/PIR.html" />
<meta property="og:site_name" content="easySensors blog" />
<meta property="og:image" content="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/Easy_PIR_MAIN_new.png?raw=true" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-22T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/Easy_PIR_MAIN_new.png?raw=true" />
<meta property="twitter:title" content="Wireless Arduino compatible PIR with LoRa or RFM 69 radio on board." />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"easySensors team"},"dateModified":"2022-09-22T00:00:00-07:00","datePublished":"2022-09-22T00:00:00-07:00","description":"Comes with nice enclosure, light and Temp Humidity sensors.","headline":"Wireless Arduino compatible PIR with LoRa or RFM 69 radio on board.","image":"https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/Easy_PIR_MAIN_new.png?raw=true","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/PIR.html"},"url":"http://localhost:4000/PIR.html"}</script>
<!-- End Jekyll SEO tag -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1FNJQFG0KL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1FNJQFG0KL');
</script>



  </head>
  <body>
    <aside class="menu">
    <div class="menu-top">
        <div class="menu-top_logo">
            <a href="/" >
                <img src="/assets/img/band_logo.png" alt="Logo" onerror="this.style.display='none'">
            </a>
        </div>
        <div class="menu-top_expand" onclick="toggleExpander(this)">
            <div class="bar_top"></div>
            <div class="bar_middle"></div>
            <div class="bar_bottom"></div>
        </div>
        <ul class="navigation">
            
            <li>
                <a href="/" category="home" title=""
                
                >
                    <span>Home</span>
                </a>
            </li>
            
            <li>
                <a href="/ESP32_S2/" category="ESP32_S2" title="Made for ESPHome ESP32_S2 based devices"
                
                >
                    <span>ESP32_S2</span>
                </a>
            </li>
            
            <li>
                <a href="/LoRa-RFM/" category="LoRa-RFM" title="LoRa and RFM69 Arduino based devices"
                
                    class="selected"
                
                >
                    <span>LoRa-RFM</span>
                </a>
            </li>
            
            <li>
                <a href="/stores.html" category="about" title="Store links"
                
                >
                    <span>Store links</span>
                </a>
            </li>
            
            <li>
                <a href="/about.html" category="about" title="about easySensors"
                
                >
                    <span>About</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="menu-contact">
        

        <a href="https://github.com/easysensors" target="_blank">
            <i class="fab fa-github"></i>
        </a>
        
    </div>
</aside>

      <main class="content-layout">
          <div class="post">
    <div class="content-container ">

        <header>
            <h1>Wireless Arduino compatible PIR with LoRa or RFM 69 radio on board.</h1>
            
                <figure class="post-cover">
                    <div class="click-to-enlarge">
                        <img
                            click-to-enlarge
                            
                            class="post-cover_image webfeedsFeaturedVisual"
                            src="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/Easy_PIR_MAIN_new.png?raw=true"
                            
                        />
                    </div>
                </figure>
            
        </header>
        <div class="post-content">
            <p><img src="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/Easy_PIR_BOTTOMnew.png?raw=true" alt="Arduino PIR" /></p>

<h2 id="the-easypirmultisensorsbox-is-a-low-cost-wireless-arduino-ide-compatible-the-atmel-atmega328p-8mhz-microcontroller-with--rfm-69-cw-or-rfm-69-hcw-or-rfm-95-lora--radios-on-board-and-few-other-nice-additions"><strong>The easyPIRmultisensorsBox is a low cost wireless Arduino IDE compatible (the Atmel ATMega328P 8MHz) microcontroller with  RFM 69 CW or RFM 69 HCW or RFM 95 LoRa  radios on board and few other nice additions.</strong></h2>

<p>Best sutable for Home Automation, IOT.  You may think of it as Arduino Pro Mini plus all the items in the picture below:</p>

<p><img src="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/replcePIR3.jpg?raw=true" alt="Arduino PIR" /></p>

<blockquote>
  <p><a href="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/easyPirPCINTdoorSensorTindie.ino">GitHub code repo link</a></p>
</blockquote>

<h2 id="specification">Specification:</h2>

<ul>
  <li>MCU Atmel ATMega328P 8MHz) microcontroller</li>
  <li>Radio- HopeRF RFM 69 CW or RFM 69 HCW or RFM 95 LoRa  (915, 868 0r 433 MHz) radio on board</li>
  <li>Enclosure dimensions 95mm<em>40mm</em>20mm</li>
  <li>Powered by two AA batteries</li>
  <li>Booster converter alows to work from batteries drained as low as 0.7V combined</li>
  <li>Wide operating temperature range. Tested -20 +40 Celsius</li>
  <li>PIR sensor Am312</li>
  <li>Temperature and humidity sensor SHTC3</li>
  <li>High Accuracy Temperature Sensor ±0.4 °C (max), –10 to 85 °C</li>
  <li>Precision Relative Humidity Sensor ± 3% RH (max), 0–80% RH</li>
  <li>Light sensor BH1750,  spectral responsibility is approximately human eye response.</li>
  <li>Authentication security - Atmel ATSHA204A Crypto Authentication Chip</li>
  <li>Dualoptiboot bootloader. Implements over the air (OTA) firmware update ability</li>
  <li>FTDI  header for programming</li>
  <li>Reverse polarity protection.</li>
  <li>Arduino pins A0 A1 have pads on PCB for any special needs.</li>
  <li>PIR triggers interrupt PCINT23 D7</li>
  <li>Magnet sensor triggers hardware interrupt 1</li>
</ul>

<p><strong>Pin out:</strong></p>

<table>
  <thead>
    <tr>
      <th>Arduino Pins</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A0, A1</td>
      <td>Available ARDUINO analog GPIO / DIGITAL GPIO as PCB pads close to radio module</td>
    </tr>
    <tr>
      <td>A4</td>
      <td>Connected to sensors i2c</td>
    </tr>
    <tr>
      <td>A5</td>
      <td>Connected to sensors i2c</td>
    </tr>
    <tr>
      <td>A6</td>
      <td>Battery sensing voltage divider 1M/470k</td>
    </tr>
    <tr>
      <td>A3</td>
      <td>Connected to  ATSHA204A</td>
    </tr>
    <tr>
      <td>D3</td>
      <td>Connected to  Magnet sensor</td>
    </tr>
    <tr>
      <td>D4</td>
      <td>Connected to RFM 69/95 DIO1</td>
    </tr>
    <tr>
      <td>D5</td>
      <td>Connected to  GREEN_LED_PIN</td>
    </tr>
    <tr>
      <td>D6</td>
      <td>Connected to  RED_LED_PIN</td>
    </tr>
    <tr>
      <td>D7</td>
      <td>Connected to  PIR sensor  PCINT23 (Older version of the board had PIR was connected to D3 INT1)</td>
    </tr>
    <tr>
      <td>D8</td>
      <td>Connected to CS FLASH chip (OTA) M25P40</td>
    </tr>
    <tr>
      <td>D2</td>
      <td>Connected to RFM 69/95 DIO0</td>
    </tr>
    <tr>
      <td>D9</td>
      <td>Connected to RFM 69/95 Reset pin</td>
    </tr>
    <tr>
      <td>D10</td>
      <td>Connected to RFM 69/95 CS/NSS</td>
    </tr>
    <tr>
      <td>D11</td>
      <td>Connected to  MOSI</td>
    </tr>
    <tr>
      <td>D12</td>
      <td>Connected to  MISO</td>
    </tr>
    <tr>
      <td>D13</td>
      <td>Connected to  SCK</td>
    </tr>
  </tbody>
</table>

<p><img src="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/FTDIpinout.png?raw=true" alt="enter image description here" /></p>

<p><strong>Arduino IDE Settings</strong></p>

<p><img src="https://github.com/EasySensors/ButtonSizeNode/blob/master/pics/IDEsettings.jpg?raw=true" alt="Arduino IDE Settings" /></p>

<p><strong>programming FTDI adapter connection</strong></p>

<p><img src="https://github.com/EasySensors/ButtonSizeNode/blob/master/pics/FTDIvcc5-3.jpg?raw=true" alt="enter image description here" /></p>

<p><strong>Old and new versions</strong></p>

<p><img src="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/pics/NewOldPIR.jpg?raw=true" alt="enter image description here" /></p>

<h2 id="how-to-use-it-as-home-automation-iot-node-controller">How to use it as home automation (IOT) node controller</h2>

<p>easyPirPCINTdoorSensor.ino is the Arduino example sketch using <a href="https://www.mysensors.org/">MySensors</a> API.</p>

<p>Connect the Node to FTDI USB adaptor, Select Pro Mini 8MHz board in Arduino IDE and upload the example sketch sketch.
The skecth will create node fith fixed address in Mysensors network.</p>

<p>The Sketch will create a number of sensors for a controller which you can use or ignore (comment it out in the code).
PIR_sensor - actual PIR sensor which toggles 0 and 1 when something moving around
VIS_sensor  - The code reports new LUX readings each time the PIR sensor wakes up the unit. 
DummyDimmerLUXvalue_sensor - well, this is a workaround for the PIR threshold.  By default when a fresh unit uploaded with the new code, PIR sensor changes will always be reported. If you like to make it less sensitive add  DummyDimmerLUXvalue_sensor  as dimmer in the controller and set maximum LUX value when PIR reports movement. I could not find any easier way sending values back to the sensor from conroller so far.</p>

<p>HUM_sensor - humidity sensor. The code reports a new value if any changes in humidity readings happened after the PIR sensor wakes up the unit. 
TEMP_sensor - The code reports a new temperature if any changes happened after the PIR sensor wakes up the unit.</p>

<p>MAG_sensor - magnet sensor, since the board has the magnetic sensor soldered the sketch shares the same code as for door sensor. Same reporting logic for the temperature and Humidity applied for the magnet sensor. Comment it out if you do not need it.</p>

<p><strong>Done</strong></p>

<p><a href="https://github.com/EasySensors/easyPIRmultisensorsBox2/blob/master/Schematics_pir_magnet_window_sensor.PDF">Schematics</a></p>

<p>The board designed by  <a href="https://www.openhardware.io/user/143/projects/Koresh">Koresh</a></p>


        </div>
        <div class="post-metadata">
            <p class="discography-album_release-date">
    date: 22 September 2022
</p>

















        </div>
    </div>
</div>

          <script>
    window.addEventListener("load", () => {
        document.getElementsByClassName("copyrights")[0].innerHTML = 
            `Copyrights &copy; ${new Date().getFullYear()} Site Author`;
    });
</script>
<footer>
    <p class="copyrights">
    </p>
</footer>
      </main>
      
      <script>
        
(function() {
    const interactedWithCookiesBanner = "interacted_with_cookies_banner";
    const storageType = localStorage;
    const cookieContainerId = "cookieContainer";

    acceptAllCookieConsent = () => {
        
            eval("storageType.setItem('GA', true);");
        
            eval("storageType.setItem('SA', true);");
        
    }

    window.cookiesAcceptDefaultFn = () => {
        const cookieContainer = document.getElementById(cookieContainerId);
        cookieContainer.classList.add("hidden");
        window.setTimeout(cookieContainer.remove.bind(cookieContainer), 1000);
        storageType.setItem(interactedWithCookiesBanner, true);
        acceptAllCookieConsent();
    }
    window.cookiesDisagreeDefaultFn = () => {
        const cookieContainer = document.getElementById(cookieContainerId);
        cookieContainer.classList.add("hidden");
        window.setTimeout(cookieContainer.remove.bind(cookieContainer), 1000);
        storageType.setItem(interactedWithCookiesBanner, true);
        window.location = `http://localhost:4000/cookies`;
    }

    window.addEventListener("load", () => {
        if(storageType.getItem(interactedWithCookiesBanner) === "true" || window.location.href.indexOf("cookies") !== -1) {
            return;
        }
        const cookieContainer = document.createElement("div");
        cookieContainer.setAttribute("id", cookieContainerId);
        cookieContainer.classList.add("hidden");

        const cookieHeader = document.createElement("h2");
        const cookieHeaderContent = document.createTextNode("Ask your users if they agree to cookies");

        const cookieParagraph = document.createElement("p");
        const cookieParagraphContent = document.createTextNode("This site might be using cookies! Customize your message or disable cookies in metaData.yml!");

        const cookieButtonsContainer = document.createElement("div");
        cookieButtonsContainer.classList.add("cookie-container--buttons");

        const cookieAgreeButton = document.createElement("button");
        const cookieButtonContent = document.createTextNode("Yes, I agree");
        cookieAgreeButton.appendChild(cookieButtonContent);
        eval("cookieAgreeButton.onclick = cookiesAcceptDefaultFn;");

        const cookieButtonDisagree = document.createElement("button");
        const cookieButtonDisagreeContent = document.createTextNode("No, take me to settings");
        cookieButtonDisagree.append(cookieButtonDisagreeContent);
        eval("cookieButtonDisagree.onclick = cookiesDisagreeDefaultFn;");

        cookieHeader.append(cookieHeaderContent);
        cookieParagraph.append(cookieParagraphContent);
        cookieButtonsContainer.append(cookieAgreeButton, cookieButtonDisagree)
        cookieContainer.append(cookieHeader, cookieParagraph, cookieButtonsContainer);
        cookieContainer.classList.add("cookie-container")
        document.body.appendChild(cookieContainer);
        window.setTimeout(() => cookieContainer.classList.remove("hidden"));
    });
})();

      </script>
    
    <script>
      (function () {
    window.toggleExpander = function toggleExpander(x) {
        const menu = document.getElementsByClassName("menu")[0];
        const navigation = document.getElementsByClassName("navigation")[0];
        if (menu.classList.contains('expanded--visible')) {
            menu.classList.toggle('expanded--visible');
            navigation.addEventListener('transitionend', function(e) {
                menu.classList.toggle("expanded");
              }, {
                capture: false,
                once: true,
                passive: false
              });
        } else {
            menu.classList.toggle("expanded");
            setTimeout(() => menu.classList.toggle('expanded--visible'), 20);
        }
    };
    window.addEventListener("load", () => {
        // #region click to enlarge images 
        const imageWrappers = document.querySelectorAll(".click-to-enlarge");
        imageWrappers.forEach(imageWrapper => {
            
            imageWrapper.addEventListener("click", () => {
                const img = imageWrapper.getElementsByTagName("img")[0];
                const src = img.attributes.getNamedItem("src");
                const modal = document.createElement("div");
                const removeModal = function() {
                    modal.classList.add("hidden");
                    setTimeout(() => {
                        document.body.removeChild(modal);
                    }, 200);
                };
                const newImage = document.createElement("img");
                newImage.classList.add("modal__picture-zoomed--image");
                newImage.setAttribute("src", src.value);
                modal.classList.add("modal__picture-zoomed", "hidden");
                // modal.style.backgroundImage = `URL("${src.value}")`;
                modal.addEventListener("click", removeModal);
                modal.append(newImage);
                document.body.append(modal);
                document.body.addEventListener("keyup", e => {
                    if (e.key === 'Escape') {
                        removeModal();
                    }
                }, {once : true});
                setTimeout(() => {
                    modal.classList.remove("hidden");
                }, 0);
            });
            
        });
        // #endregion click to enlarge images 
        // #region embedded audio players
        const players = document.querySelectorAll("iframe.embedded-player");
        const getParamsByPlayerType = (src, type) => {
            const rt = (src, height) => ({
                src: src,
                height: height
            });
            switch (type.toLocaleLowerCase()) {
                case "soundcloud":
                    return rt(`https://w.soundcloud.com/player/?url=${src}`, 125);
                case "bandcamp":
                    return rt(`https://bandcamp.com/EmbeddedPlayer/${src}`, 125);
                case "spotify":
                    return rt(`https://open.spotify.com/embed/track/${src}`, 80);
                case "spotifyalbum":
                    return rt(`https://open.spotify.com/embed/album/${src}`, 80);
                case "spotifyplaylist":
                    return rt(`https://open.spotify.com/embed/playlist/${src}`, 80);
                case "spotifyepisode":
                    return rt(`https://open.spotify.com/embed/episode/${src}`, 152);
                case "spotifyshow":
                    return rt(`https://open.spotify.com/embed/show/${src}`, 152);
                case "youtube":
                    return rt(`https://www.youtube.com/embed/${src}`, 350);
                case "anchor.fm":
                    return rt(`https://anchor.fm/sucias/embed/episodes/${src}`,102);
                default:
                    return rt(src, 125);
            }
        };
        players.forEach(player => {
            const givenSrc = player.getAttribute("givenSrc");
            const type = player.getAttribute("type");
            const { src, height } = getParamsByPlayerType(givenSrc, type);
            player.setAttribute("src", src);
            player.setAttribute("height", height);
            player.classList.remove("hidden");
        });
        // #endregion embedded audio players
    });
})();
    </script>
    


  </body>
</html>